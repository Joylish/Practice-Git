# 21.01.18

## â­ ê°œë… ì •ë¦¬

### ê°œë…1

#### Graphqlë¡œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¬¸ì œ

   * over-fetching
   * under-fetching
   * ê¸°ì¡´ rest apiëŠ” url í•„ìš”
        * url
        * parameter
        * form-data
        * body-parse
        * requet ê°ì²´

#### Graphql ì£¼ìš”íŠ¹ì§•

- **í•˜ë‚˜ì˜ ì¢…ì (end point)** = URLì²´ê³„ê°€ í•„ìš” ì—†ë‹¤.

- **Query**ì™€ **Resolver**ë¡œ ì›í•˜ëŠ” ì •ë³´ ìš”ì²­

  - resolverì— argumentë¥¼ ì£¼ì–´ íŠ¹ì • ì •ë³´ ìš”ì²­ ê°€ëŠ¥

- **type**ì´ ìˆë‹¤. schemaì— ìƒˆë¡œìš´ typeì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

  

### ê°œë…2

### GraphQL ì„œë²„ ë¹ ë¥´ê²Œ ë§Œë“¤ê¸°

#### "graphql-yoga"ë¥¼ ì“°ë©´ ëœë‹¤.

create-react-appë¡œ react appì„ í¸ë¦¬í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë“¯ì´ graphql-yogaë¡œ graphql ì„œë²„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ê¸°ë³¸í¬íŠ¸ëŠ” **4000**ì´ë‹¤.

```javascript
import { GraphQLServer } from "graphql-yoga";
import resolvers from "./graphql/resolvers";

const server = new GraphQLServer({
  typeDefs: "graphql/schema.graphql",
  resolvers,
});

server.start(() => console.log("Now Graphql Server Running!!"));

```



ì„œë²„ë¡œ queryë¥¼ ë³´ë‚¼ ë•Œ ì´ ëª¨ë“  ìš”ì²­ì€ postë¡œ ê°„ë‹¤. request bodyì— queryê°€ ì „ë‹¬ëœë‹¤.

<img src="./images/playground.png">





### ê°œë…3

#### schema

í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°›ê±°ë‚˜ ì¤„ ì •ë³´ì— ëŒ€í•œ ì„œìˆ 

#### query

í´ë¼ì´ì–¸íŠ¸ê°€ ë°ì´í„°ë² ì´ìŠ¤ë¡œë¶€í„° **ì •ë³´ë¥¼ ì–»ê¸°** ìœ„í•œ ì‘ì—…

```
type Query{
  name: String!
}
```

ìœ„ Queryì˜ ì˜ë¯¸ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. **Queryì— nameì„ ë³´ë‚´ë©´ Stringì„ ë³´ë‚¸ë‹¤**ëŠ” ê²ƒì´ë‹¤.

#### resolvers

"schemaì— ì •ì˜í•œ queryì— ëŒ€ì‘"

**schemaì— ì •ì˜í•œ queryëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ê²Œ í’€ì–´ì•¼ í•˜ëŠ” ì–´ë–¤ ë¬¸ì œ**ê°™ì€ ê²ƒì´ë‹¤. ì´ ë¬¸ì œ, queryë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì´ resolverë‹¤. resolverëŠ” jsë¡œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

ì¦‰, **queryì— ì •ì˜í•˜ì§€ ì•Šì€ property**ì— ëŒ€í•œ ê²ƒì„ resolverì— ì •ì˜í•˜ëŠ” ê²ƒì€ ì˜³ì§€ ì•Šë‹¤. 

```javascript
const resolvers = {
  Query: {
    name: () => "Joylish",
  },
};
```

graphqlì—ëŠ” view, urlì´ ì—†ê³  **queryì™€ resolver**ê°€ ìˆë‹¤. ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ ë˜ëŠ” ë‹¤ë¥¸ APIì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. 

#### ìƒˆë¡œìš´ íƒ€ì… ì •ì˜

primitive type(String, Int, ...) ì´ì™¸ schema íŒŒì¼ì— queryë¡œ ìƒˆë¡œìš´ íƒ€ì…ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

```
type Joylish{
  name: String!
  age: Int!
  gender: String!
}

type Query{
  person: Joylish!
}
```

ì´ì— ëŒ€í•œ resolverëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```javascript
const joylish = {
  name: "Joylish",
  age: "27",
  gender: "female",
};

const resolvers = {
  Query: {
    person: () => joylish,
  },
};

export default resolvers;
```

<img src="./images/new-type.png"/>



#### queryì—ì„œ argumentë¥¼ ì´ìš©í•˜ì—¬ íŠ¹ì •ë°ì´í„° ì½ê¸°

```
type Query{
	ë¦¬ì†ŒìŠ¤/í”„ë¡œí¼í‹°(ì¸ìì´ë¦„: íƒ€ì…): ë°˜í™˜íƒ€ì…
}
```

schemaì— ì—¬ëŸ¬ ê°œ ë°ì´í„° ì¤‘ íŠ¹ì • ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” queryë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì´ ë•Œ, í•´ë‹¹ queryì— ëŒ€í•œ ì¸ìë¥¼ ë„˜ê²¨ ì¤„ ìˆ˜ ìˆë‹¤. í˜•ì‹ì€ ìœ„ì™€ ê°™ë‹¤.

```
// schema.graphql
type Person{
  id: Int!
  name: String!
  age: Int!
  gender: String!
}

type Query{
  people: [Person]!
  person(id: Int!): Person
}
```

**Resolverì—ëŠ” ì–´ë–¤ ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤. ë‹¤ë¥¸ DB ë˜ëŠ” ë‹¤ë¥¸ APIì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤** 

```
Query: { 
	ë¦¬ì†ŒìŠ¤/í”„ë¡œí¼í‹°: [Operation ì •ì˜]
}
```

schemaì—ì„œ ìƒˆë¡œìš´ íƒ€ì… Personì´ ë˜ì–´ ìˆê³  peopleê³¼ personì— ëŒ€í•œ queryê°€ ì •ì˜ë˜ì–´ ìˆë‹¤. resolverì—ëŠ” peopleê³¼ personeì— ëŒ€í•œ operationì´ í•„ìš”í•˜ë‹¤.

```javascript
// resolvers.js
import { people, getById } from "./db";
const resolvers = {
  Query: {
    people: () => people,
    person: (_, { id }) => getById(id),
  },
};

export default resolvers;
```

ğŸ˜ resolverì˜ operation ì¸ìì— ëŒ€í•œ ê³µë¶€ê°€ í•„ìš”í•¨!!



#### mutation

í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ ë˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ë˜ëŠ” ë©”ëª¨ë¦¬ë¶€í„° **ì •ë³´ë¥¼ ë°”ê¾¸ê¸°** ìœ„í•œ ì‘ì—…



#### ê¸°ì¡´ rest apië¥¼ graphqlë¡œ ê°ì‹¸ê¸° 

ì¶”ê°€